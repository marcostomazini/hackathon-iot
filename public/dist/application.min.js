"use strict";var ApplicationConfiguration=function(){var applicationModuleName="angleApp",applicationModuleVendorDependencies=["ngRoute","ngAnimate","ngStorage","ngTouch","ngCookies","pascalprecht.translate","ui.bootstrap","ui.router","oc.lazyLoad","cfp.loadingBar","ngSanitize","ngResource","ui.utils"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("articles"),function(){ApplicationConfiguration.registerModule("app.charts",["app.colors"])}(),function(){ApplicationConfiguration.registerModule("app.colors")}(),function(){ApplicationConfiguration.registerModule("app.core",["app.routes","app.sidebar","app.navsearch","app.preloader","app.loadingbar","app.translate","app.settings","app.utils"])}(),function(){ApplicationConfiguration.registerModule("app.lazyload")}(),function(){ApplicationConfiguration.registerModule("app.loadingbar")}(),function(){ApplicationConfiguration.registerModule("app.navsearch")}(),ApplicationConfiguration.registerModule("page"),function(){ApplicationConfiguration.registerModule("app.preloader")}(),function(){ApplicationConfiguration.registerModule("app.routes",["app.lazyload"])}(),ApplicationConfiguration.registerModule("sensores"),function(){ApplicationConfiguration.registerModule("app.settings")}(),function(){ApplicationConfiguration.registerModule("app.sidebar")}(),function(){ApplicationConfiguration.registerModule("app.translate")}(),ApplicationConfiguration.registerModule("users"),function(){ApplicationConfiguration.registerModule("app.utils",["app.colors"])}(),angular.module("articles").run(["Menus",function(Menus){Menus.addMenuItem("sidebar","Articles","articles","dropdown","/articles(/.*)?",!1,null,20),Menus.addSubMenuItem("sidebar","articles","List Articles","articles"),Menus.addSubMenuItem("sidebar","articles","New Article","articles/create")}]),angular.module("articles").config(["$stateProvider",function($stateProvider){$stateProvider.state("app.listArticles",{url:"/articles",title:"List Articles",templateUrl:"modules/articles/views/list-articles.client.view.html"}).state("app.createArticle",{url:"/articles/create",title:"New Article",templateUrl:"modules/articles/views/create-article.client.view.html"}).state("app.viewArticle",{url:"/articles/:articleId",title:"View Article",templateUrl:"modules/articles/views/view-article.client.view.html",controller:"ArticlesController"}).state("app.editArticle",{title:"Edit Article",url:"/articles/:articleId/edit",templateUrl:"modules/articles/views/edit-article.client.view.html"})}]),angular.module("articles").controller("ArticlesController",["$scope","$stateParams","$location","Authentication","Articles",function($scope,$stateParams,$location,Authentication,Articles){$scope.authentication=Authentication,$scope.create=function(){var article=new Articles({title:this.title,content:this.content});article.$save(function(response){$location.path("articles/"+response._id),$scope.title="",$scope.content=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(article){if(article){article.$remove();for(var i in $scope.articles)$scope.articles[i]===article&&$scope.articles.splice(i,1)}else $scope.article.$remove(function(){$location.path("articles")})},$scope.update=function(){var article=$scope.article;article.$update(function(){$location.path("articles/"+article._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.articles=Articles.query()},$scope.findOne=function(){$scope.article=Articles.get({articleId:$stateParams.articleId})}}]),angular.module("articles").factory("Articles",["$resource",function($resource){return $resource("articles/:articleId",{articleId:"@_id"},{update:{method:"PUT"}})}]),function(){function chartJS(type){return function(){return{restrict:"A",scope:{data:"=",options:"=",id:"@",width:"=",height:"=",resize:"=",chart:"@",segments:"@",responsive:"=",tooltip:"=",legend:"="},link:function($scope,$elem){var ctx=$elem[0].getContext("2d"),autosize=!1;$scope.size=function(){$scope.width<=0?($elem.width($elem.parent().width()),ctx.canvas.width=$elem.width()):(ctx.canvas.width=$scope.width||ctx.canvas.width,autosize=!0),$scope.height<=0?($elem.height($elem.parent().height()),ctx.canvas.height=ctx.canvas.width/2):(ctx.canvas.height=$scope.height||ctx.canvas.height,autosize=!0)},$scope.$watch("data",function(newVal){chartCreated&&chartCreated.destroy(),newVal&&($scope.chart&&(type=$scope.chart),autosize&&($scope.size(),chart=new Chart(ctx)),($scope.responsive||$scope.resize)&&($scope.options.responsive=!0),void 0!==$scope.responsive&&($scope.options.responsive=$scope.responsive),chartCreated=chart[type]($scope.data,$scope.options),chartCreated.update(),$scope.legend&&angular.element($elem[0]).parent().after(chartCreated.generateLegend()))},!0),$scope.$watch("tooltip",function(newVal){if(chartCreated&&chartCreated.draw(),void 0!==newVal&&chartCreated.segments&&!(!isFinite(newVal)||newVal>=chartCreated.segments.length||0>newVal)){var activeSegment=chartCreated.segments[newVal];activeSegment.save(),activeSegment.fillColor=activeSegment.highlightColor,chartCreated.showTooltip([activeSegment]),activeSegment.restore()}},!0),$scope.size();var chartCreated,chart=new Chart(ctx)}}}}angular.module("app.charts").directive("linechart",chartJS("Line")).directive("barchart",chartJS("Bar")).directive("radarchart",chartJS("Radar")).directive("polarchart",chartJS("PolarArea")).directive("piechart",chartJS("Pie")).directive("doughnutchart",chartJS("Doughnut")).directive("donutchart",chartJS("Doughnut"))}(),function(){function classyloader($timeout,Utils,$window){function link(scope,element){function checkLoaderInVIew(element,options){var offset=-20;!element.hasClass(inViewFlagClass)&&Utils.isInView(element,{topoffset:offset})&&startLoader(element,options)}function startLoader(element,options){element.ClassyLoader(options).addClass(inViewFlagClass)}var $scroller=$($window),inViewFlagClass="js-is-in-view";$timeout(function(){var $element=$(element),options=$element.data();options&&(options.triggerInView?($scroller.scroll(function(){checkLoaderInVIew($element,options)}),checkLoaderInVIew($element,options)):startLoader($element,options))},0)}var directive={link:link,restrict:"A"};return directive}angular.module("app.charts").directive("classyloader",classyloader),classyloader.$inject=["$timeout","Utils","$window"]}(),function(){function flot($http,$timeout){function link(scope,element,attrs){function init(){var plotObj;if(scope.dataset&&scope.options)return plotObj=$.plot(plotArea,scope.dataset,scope.options),scope.$emit("plotReady",plotObj),scope.callback&&scope.callback(plotObj,scope),plotObj}function onDatasetChanged(dataset){return plot?(plot.setData(dataset),plot.setupGrid(),plot.draw()):(plot=init(),onSerieToggled(scope.series),plot)}function onSerieToggled(series){function toggleFor(sName){return function(s,i){someData[i]&&someData[i][sName]&&(someData[i][sName].show=s)}}if(plot&&series){var someData=plot.getData();for(var sName in series)angular.forEach(series[sName],toggleFor(sName));plot.setData(someData),plot.draw()}}function onSrcChanged(src){src&&$http.get(src).success(function(data){$timeout(function(){scope.dataset=data})}).error(function(){$.error("Flot chart: Bad request.")})}var height,plot,plotArea,width,heightDefault=220;plot=null,width=attrs.width||"100%",height=attrs.height||heightDefault,plotArea=$(element.children()[0]),plotArea.css({width:width,height:height}),scope.$watchCollection("dataset",onDatasetChanged,!0),scope.$watch("series",onSerieToggled,!0),scope.$watch("src",onSrcChanged)}var directive={restrict:"EA",template:"<div></div>",scope:{dataset:"=?",options:"=",series:"=",callback:"=",src:"="},link:link};return directive}angular.module("app.charts").directive("flot",flot),flot.$inject=["$http","$timeout"]}(),function(){function morrisChart(type){return function(){return{restrict:"EA",scope:{morrisData:"=",morrisOptions:"="},link:function($scope,element){$scope.$watch("morrisData",function(newVal){newVal&&($scope.morrisInstance.setData(newVal),$scope.morrisInstance.redraw())},!0),$scope.morrisOptions.element=element,$scope.morrisData&&($scope.morrisOptions.data=$scope.morrisData),$scope.morrisInstance=new Morris[type]($scope.morrisOptions)}}}}angular.module("app.charts").directive("morrisBar",morrisChart("Bar")).directive("morrisDonut",morrisChart("Donut")).directive("morrisLine",morrisChart("Line")).directive("morrisArea",morrisChart("Area"))}(),function(){function sparkline(){var directive={restrict:"EA",scope:{sparkline:"="},controller:Controller};return directive}function Controller($scope,$element,$timeout,$window){function initSparLine(){var options=$scope.sparkline,data=$element.data();options?data&&(options=angular.extend({},options,data)):options=data,options.type=options.type||"bar",options.disableHiddenCheck=!0,$element.sparkline("html",options),options.resize&&$($window).resize(function(){$element.sparkline("html",options)})}var runSL=function(){initSparLine()};$timeout(runSL)}angular.module("app.charts").directive("sparkline",sparkline),Controller.$inject=["$scope","$element","$timeout","$window"]}(),function(){function ChartData($resource){function load(source){return $resource(source,{},opts).get()}this.load=load;var opts={get:{method:"GET",isArray:!0}}}angular.module("app.charts").service("ChartData",ChartData),ChartData.$inject=["$resource"]}(),function(){angular.module("app.colors").constant("APP_COLORS",{primary:"#5d9cec",success:"#27c24c",info:"#23b7e5",warning:"#ff902b",danger:"#f05050",inverse:"#131e26",green:"#37bc9b",pink:"#f532e5",purple:"#7266ba",dark:"#3a3f51",yellow:"#fad732","gray-darker":"#232735","gray-dark":"#3a3f51",gray:"#dde6e9","gray-light":"#e4eaec","gray-lighter":"#edf1f2"})}(),function(){function Colors(APP_COLORS){function byName(name){return APP_COLORS[name]||"#fff"}this.byName=byName}angular.module("app.colors").service("Colors",Colors),Colors.$inject=["APP_COLORS"]}(),function(){function coreConfig($controllerProvider,$compileProvider,$filterProvider,$provide){var core=angular.module("app.core");core.controller=$controllerProvider.register,core.directive=$compileProvider.directive,core.filter=$filterProvider.register,core.factory=$provide.factory,core.service=$provide.service,core.constant=$provide.constant,core.value=$provide.value}angular.module("app.core").config(coreConfig),coreConfig.$inject=["$controllerProvider","$compileProvider","$filterProvider","$provide"]}(),function(){angular.module("app.core").constant("APP_MEDIAQUERY",{desktopLG:1200,desktop:992,tablet:768,mobile:480})}(),function(){function coreMenu(Menus){Menus.addMenuItem("sidebar","Home","home",null,"/home",!0,null,null,"icon-home")}angular.module("app.core").run(coreMenu),coreMenu.$inject=["Menus"]}(),function(){function appRoutes($stateProvider,$locationProvider,$urlRouterProvider,helper){$locationProvider.html5Mode(!1),$urlRouterProvider.otherwise("/cliente"),$stateProvider.state("app",{"abstract":!0,templateUrl:"modules/core/views/core.client.view.html",resolve:helper.resolveFor("modernizr","icons")}).state("app.home",{url:"/home",templateUrl:"modules/core/views/home.client.view.html"}).state("app.cliente",{url:"/cliente",templateUrl:"modules/sensores/views/cliente.client.view.html",controller:"ClienteController",resolve:helper.resolveFor("flot-chart","flot-chart-plugins","sparklines","classyloader")}).state("app.comunidade",{url:"/comunidade",templateUrl:"modules/sensores/views/comunidade.client.view.html",controller:"ComunidadeController",resolve:helper.resolveFor("flot-chart","flot-chart-plugins","sparklines","classyloader")}).state("app.prefeitura",{url:"/prefeitura",templateUrl:"modules/sensores/views/prefeitura.client.view.html",controller:"PrefeituraController",resolve:helper.resolveFor("flot-chart","flot-chart-plugins","sparklines","classyloader","oitozero.ngSweetAlert")}).state("app.simulador",{url:"/simulador",templateUrl:"modules/sensores/views/simulador.client.view.html",controller:"SimuladorController"})}angular.module("app.core").config(appRoutes),appRoutes.$inject=["$stateProvider","$locationProvider","$urlRouterProvider","RouteHelpersProvider"]}(),function(){function appRun($rootScope,$state,$stateParams,$window,$templateCache,Colors,Sensores,$interval){$rootScope.caixa=[];var stopTime;$rootScope.fightTime=function(){angular.isDefined(stopTime)||(stopTime=$interval(function(){$rootScope.stopFightTime(),$rootScope.retornaDados()},1e4))},$rootScope.stopFightTime=function(){angular.isDefined(stopTime)&&($interval.cancel(stopTime),stopTime=void 0)},$rootScope.retornaDados=function(){$.getJSON("/api/sensor/caixa",function(data){try{$rootScope.caixa=data,$.getJSON("/api/sensor/caixa-historico",function(data2){try{$rootScope.historico=data2,$.getJSON("/api/sensor/solo",function(data3){try{$rootScope.solo=data3}catch(ex){}})}catch(ex){}})}catch(ex){}})},$rootScope.retornaDados();var handleCallback=function(msg){$rootScope.$apply(function(){$("#messages").append("<li>"+msg.data+"</li>");var sensor=void 0;sensor=new Sensores({tipo:"todos",valor:msg.data}),sensor.$save(function(response){$rootScope.fightTime()},function(errorResponse){})})},source=new EventSource("/api/stream");source.addEventListener("message",handleCallback,!1),$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.$storage=$window.localStorage,$rootScope.colorByName=Colors.byName,$rootScope.cancel=function($event){$event.stopPropagation()},$rootScope.$on("$stateNotFound",function(event,unfoundState){console.log(unfoundState.to),console.log(unfoundState.toParams),console.log(unfoundState.options)}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){console.log(error)}),$rootScope.$on("$stateChangeSuccess",function(){$window.scrollTo(0,0),$rootScope.currTitle=$state.current.title}),$rootScope.currTitle=$state.current.title,$rootScope.pageTitle=function(){var title=$rootScope.app.name+" - "+($rootScope.currTitle||$rootScope.app.description);return document.title=title,title}}angular.module("app.core").run(appRun),appRun.$inject=["$rootScope","$state","$stateParams","$window","$templateCache","Colors","Sensores","$interval"]}(),angular.module("app.core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("app.core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position,iconClass,translateKey,alert){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender,iconClass:iconClass||"fa fa-file-o",translate:translateKey,alert:alert}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar"),this.addMenu("sidebar")}]),function(){function lazyloadConfig($ocLazyLoadProvider,APP_REQUIRES){$ocLazyLoadProvider.config({debug:!1,events:!0,modules:APP_REQUIRES.modules})}angular.module("app.lazyload").config(lazyloadConfig),lazyloadConfig.$inject=["$ocLazyLoadProvider","APP_REQUIRES"]}(),function(){angular.module("app.lazyload").constant("APP_REQUIRES",{scripts:{modernizr:["/lib/modernizr/modernizr.js"],classyloader:["/vendor/jquery-classyloader/js/jquery.classyloader.min.js"],icons:["/vendor/skycons/skycons.js","/lib/fontawesome/css/font-awesome.min.css","/lib/simple-line-icons/css/simple-line-icons.css","/vendor/weather-icons/css/weather-icons.min.css"],sparklines:["/vendor/sparklines/jquery.sparkline.min.js"],"flot-chart":["/vendor/Flot/jquery.flot.js"],"flot-chart-plugins":["/vendor/flot.tooltip/js/jquery.flot.tooltip.min.js","/vendor/Flot/jquery.flot.resize.js","/vendor/Flot/jquery.flot.pie.js","/vendor/Flot/jquery.flot.time.js","/vendor/Flot/jquery.flot.categories.js","/vendor/flot-spline/js/jquery.flot.spline.min.js"],chartjs:["/vendor/Chart.js/Chart.js"],morris:["/vendor/raphael/raphael.js","/vendor/morris.js/morris.js","/vendor/morris.js/morris.css"]},modules:[{name:"oitozero.ngSweetAlert",files:["vendor/sweetalert/dist/sweetalert.css","vendor/sweetalert/dist/sweetalert.min.js","vendor/angular-sweetalert/SweetAlert.js"]}]})}(),function(){function loadingbarConfig(cfpLoadingBarProvider){cfpLoadingBarProvider.includeBar=!0,cfpLoadingBarProvider.includeSpinner=!1,cfpLoadingBarProvider.latencyThreshold=500,cfpLoadingBarProvider.parentSelector=".wrapper > section"}angular.module("app.loadingbar").config(loadingbarConfig),loadingbarConfig.$inject=["cfpLoadingBarProvider"]}(),function(){function loadingbarRun($rootScope,$timeout,cfpLoadingBar){var thBar;$rootScope.$on("$stateChangeStart",function(){$(".wrapper > section").length&&(thBar=$timeout(function(){cfpLoadingBar.start()},0))}),$rootScope.$on("$stateChangeSuccess",function(event){event.targetScope.$watch("$viewContentLoaded",function(){$timeout.cancel(thBar),cfpLoadingBar.complete()})})}angular.module("app.loadingbar").run(loadingbarRun),loadingbarRun.$inject=["$rootScope","$timeout","cfpLoadingBar"]}(),function(){function searchOpen(){var directive={controller:searchOpenController,restrict:"A"};return directive}function searchDismiss(){var directive={controller:searchDismissController,restrict:"A"};return directive}function searchOpenController($scope,$element,NavSearch){$element.on("click",function(e){e.stopPropagation()}).on("click",NavSearch.toggle)}function searchDismissController($scope,$element,NavSearch){var inputSelector='.navbar-form input[type="text"]';$(inputSelector).on("click",function(e){e.stopPropagation()}).on("keyup",function(e){27===e.keyCode&&NavSearch.dismiss()}),$(document).on("click",NavSearch.dismiss),$element.on("click",function(e){e.stopPropagation()}).on("click",NavSearch.dismiss)}angular.module("app.navsearch").directive("searchOpen",searchOpen).directive("searchDismiss",searchDismiss),searchOpenController.$inject=["$scope","$element","NavSearch"],searchDismissController.$inject=["$scope","$element","NavSearch"]}(),function(){function NavSearch(){function toggle(){var navbarForm=$(navbarFormSelector);navbarForm.toggleClass("open");var isOpen=navbarForm.hasClass("open");navbarForm.find("input")[isOpen?"focus":"blur"]()}function dismiss(){$(navbarFormSelector).removeClass("open").find('input[type="text"]').blur().val("")}this.toggle=toggle,this.dismiss=dismiss;var navbarFormSelector="form.navbar-form"}angular.module("app.navsearch").service("NavSearch",NavSearch)}(),angular.module("page").config(["$stateProvider",function($stateProvider){$stateProvider.state("page",{url:"/page",templateUrl:"modules/page/views/page.client.view.html"})}]),function(){function preloader($animate,$timeout,$q){function link(scope,el){function startCounter(){var remaining=100-counter;counter+=.015*Math.pow(1-Math.sqrt(remaining),2),scope.loadCounter=parseInt(counter,10),timeout=$timeout(startCounter,20)}function endCounter(){$timeout.cancel(timeout),scope.loadCounter=100,$timeout(function(){$animate.addClass(el,"preloader-hidden"),angular.element("body").css("overflow","")},300)}function appReady(){var deferred=$q.defer(),viewsLoaded=0,off=scope.$on("$viewContentLoaded",function(){viewsLoaded++,2===viewsLoaded&&($timeout(function(){deferred.resolve()},3e3),off())});return deferred.promise}scope.loadCounter=0;var timeout,counter=0;angular.element("body").css("overflow","hidden"),el.addClass("preloader"),appReady().then(endCounter),timeout=$timeout(startCounter)}var directive={restrict:"EAC",template:'<div class="preloader-progress"><div class="preloader-progress-bar" ng-style="{width: loadCounter + \'%\'}"></div></div>',link:link};return directive}angular.module("app.preloader").directive("preloader",preloader),preloader.$inject=["$animate","$timeout","$q"]}(),function(){function RouteHelpersProvider(APP_REQUIRES){function basepath(uri){return"app/views/"+uri}function resolveFor(){var _args=arguments;return{deps:["$ocLazyLoad","$q",function($ocLL,$q){function andThen(_arg){return"function"==typeof _arg?promise.then(_arg):promise.then(function(){var whatToLoad=getRequired(_arg);return whatToLoad?$ocLL.load(whatToLoad):$.error("Route resolve: Bad resource name ["+_arg+"]")})}function getRequired(name){if(APP_REQUIRES.modules)for(var m in APP_REQUIRES.modules)if(APP_REQUIRES.modules[m].name&&APP_REQUIRES.modules[m].name===name)return APP_REQUIRES.modules[m];return APP_REQUIRES.scripts&&APP_REQUIRES.scripts[name]}for(var promise=$q.when(1),i=0,len=_args.length;len>i;i++)promise=andThen(_args[i]);return promise}]}}return{basepath:basepath,resolveFor:resolveFor,$get:function(){return{basepath:basepath,resolveFor:resolveFor}}}}angular.module("app.routes").provider("RouteHelpers",RouteHelpersProvider),RouteHelpersProvider.$inject=["APP_REQUIRES"]}(),angular.module("sensores").controller("ClienteController",["$scope","ChartData","$timeout","$interval",function($scope,ChartData,$timeout,$interval){function updateHistorico(){$scope.historicoDataset=$scope.historico}function getRandomData(){for(data.length>0&&(data=data.slice(1));data.length<totalPoints;){var prev=data.length>0?data[data.length-1]:50,y=prev+10*Math.random()-5;0>y?y=0:y>100&&(y=100),data.push(y)}for(var res=[],i=0;i<data.length;++i)res.push([i,data[i]]);return[res]}function update(){$scope.realTimeData=getRandomData(),$timeout(update,30)}$interval(function(){var data=$scope.caixa,dado=data[0],litros=parseInt(dado.valor),pctg=Math.floor(litros/2e3*100);pctg>100&&(pctg=100),$("#water").text(litros.toString()+" litros"),Math.abs(data[0].valor-data[10].valor)>20&&$("#water").toggleClass("animate").css({height:pctg+"%"})},5e3),$scope.barData=ChartData.load("server/chart/bar.json"),$scope.barOptions={series:{bars:{align:"center",lineWidth:0,show:!0,barWidth:.6,fill:.9}},grid:{borderColor:"#eee",borderWidth:0,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.barStackeData=ChartData.load("server/chart/barstacked.json"),$scope.barStackedOptions={series:{stack:!0,bars:{align:"center",lineWidth:3,show:!0,barWidth:1,fill:.9}},yaxis:{min:0,max:100},grid:{show:!1,borderColor:"red",borderWidth:2,backgroundColor:"#fcfcfc"},shadowSize:2},$scope.splineOptions={series:{lines:{show:!1},points:{show:!0,radius:4},splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,max:150,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left",tickFormatter:function(v){return v}},shadowSize:10},$scope.historicoDataset=ChartData.load("api/sensor/caixa-historico"),updateHistorico(),$interval(updateHistorico,5e3),$scope.caixaDaguaHistoricoOptions={legend:{position:"nw"},series:{lines:{show:!1},points:{show:!0,radius:4},splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,xaxis:{tickColor:"#fcfcfc",mode:"time",minTickSize:[2,"second"]},yaxis:{min:0,alignTicksWithAxis:1,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left"},shadowSize:10},$scope.areaData=ChartData.load("server/chart/area.json"),$scope.areaOptions={series:{lines:{show:!0,fill:.8},points:{show:!0,radius:4}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories",alignTicksWithAxis:10},yaxis:{min:0,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left",tickFormatter:function(v){return v+" visitors"}},shadowSize:0},$scope.lineData=ChartData.load("server/chart/line.json"),$scope.lineOptions={series:{lines:{show:!0,fill:.01},points:{show:!0,radius:4}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#eee",mode:"categories"},yaxis:{position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.pieData=ChartData.load("server/chart/pie.json"),$scope.pieOptions={series:{pie:{show:!0,innerRadius:0,label:{show:!0,radius:.8,formatter:function(label,series){return'<div class="flot-pie-label">'+Math.round(series.percent)+"%</div>"},background:{opacity:.8,color:"#222"}}}}},$scope.donutData=ChartData.load("server/chart/donut.json"),$scope.donutOptions={series:{pie:{show:!0,innerRadius:.5}}},$scope.realTimeOptions={series:{lines:{show:!0,fill:!0,fillColor:{colors:["#a0e0f3","#23b7e5"]}},shadowSize:0},grid:{show:!1,borderWidth:0,minBorderMargin:20,labelMargin:10},xaxis:{tickFormatter:function(){return""}},yaxis:{min:0,max:110},legend:{show:!0},colors:["#23b7e5"]};var data=[],totalPoints=300;update(),$scope.$on("panel-refresh",function(event,id){console.log("Simulating chart refresh during 3s on #"+id),$timeout(function(){$scope.$broadcast("removeSpinner",id),console.log("Refreshed #"+id)},3e3)}),$scope.$on("panel-remove",function(event,id,deferred){console.log("Panel #"+id+" removing"),deferred.resolve()}),$scope.$on("panel-removed",function(event,id){console.log("Panel #"+id+" removed")})}]).service("ChartData",["$resource",function($resource){var opts={get:{method:"GET",isArray:!0}};return{load:function(source){return $resource(source,{},opts).get()}}}]),angular.module("sensores").controller("ComunidadeController",["$scope","ChartData","$timeout","$interval",function($scope,ChartData,$timeout,$interval){function getRandomData(){for(data.length>0&&(data=data.slice(1));data.length<totalPoints;){var prev=data.length>0?data[data.length-1]:50,y=prev+10*Math.random()-5;0>y?y=0:y>100&&(y=100),data.push(y)}for(var res=[],i=0;i<data.length;++i)res.push([i,data[i]]);return[res]}function update(){$scope.realTimeData=getRandomData(),$timeout(update,30)}$interval(function(){try{for(var i=2;8>=i;i++){var v=parseInt($(".c"+i).text());v=Math.floor(v+3*Math.random()),$(".c"+i).text(v)}}catch(ex){}},800),$interval(function(){var data=$scope.caixa,v=parseInt($(".c1").text()),d1=parseInt(data[2].valor),d0=parseInt(data[0].valor),gasto=d1-d0;gasto>0&&$(".c1").text(v+gasto)},5e3),$scope.barData=ChartData.load("server/chart/bar.json"),$scope.barOptions={series:{bars:{align:"center",lineWidth:0,show:!0,barWidth:.6,fill:.9}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.barStackeData=ChartData.load("server/chart/barstacked.json"),$scope.barStackedOptions={series:{stack:!0,bars:{align:"center",lineWidth:0,show:!0,barWidth:.6,fill:.9}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,max:200,position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.splineData=ChartData.load("server/chart/spline.json"),$scope.splineOptions={series:{lines:{show:!1},points:{show:!0,radius:4},splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,max:150,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left",tickFormatter:function(v){return v}},shadowSize:0},$scope.areaData=ChartData.load("server/chart/area.json"),$scope.areaOptions={series:{lines:{show:!0,fill:.8},points:{show:!0,radius:4}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left",tickFormatter:function(v){return v+" visitors"}},shadowSize:0},$scope.lineData=ChartData.load("server/chart/line.json"),$scope.lineOptions={series:{lines:{show:!0,fill:.01},points:{show:!0,radius:4}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#eee",mode:"categories"},yaxis:{position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.pieData=ChartData.load("server/chart/pie.json"),
$scope.pieOptions={series:{pie:{show:!0,innerRadius:0,label:{show:!0,radius:.8,formatter:function(label,series){return'<div class="flot-pie-label">'+Math.round(series.percent)+"%</div>"},background:{opacity:.8,color:"#222"}}}}},$scope.donutData=ChartData.load("server/chart/donut.json"),$scope.donutOptions={series:{pie:{show:!0,innerRadius:.5}}},$scope.realTimeOptions={series:{lines:{show:!0,fill:!0,fillColor:{colors:["#a0e0f3","#23b7e5"]}},shadowSize:0},grid:{show:!1,borderWidth:0,minBorderMargin:20,labelMargin:10},xaxis:{tickFormatter:function(){return""}},yaxis:{min:0,max:110},legend:{show:!0},colors:["#23b7e5"]};var data=[],totalPoints=300;update(),$scope.$on("panel-refresh",function(event,id){console.log("Simulating chart refresh during 3s on #"+id),$timeout(function(){$scope.$broadcast("removeSpinner",id),console.log("Refreshed #"+id)},3e3)}),$scope.$on("panel-remove",function(event,id,deferred){console.log("Panel #"+id+" removing"),deferred.resolve()}),$scope.$on("panel-removed",function(event,id){console.log("Panel #"+id+" removed")})}]).service("ChartData",["$resource",function($resource){var opts={get:{method:"GET",isArray:!0}};return{load:function(source){return $resource(source,{},opts).get()}}}]),angular.module("sensores").controller("PrefeituraController",["$scope","ChartData","$timeout","$interval","SweetAlert",function($scope,ChartData,$timeout,$interval,SweetAlert){function getRandomData(){for(data.length>0&&(data=data.slice(1));data.length<totalPoints;){var prev=data.length>0?data[data.length-1]:50,y=prev+10*Math.random()-5;0>y?y=0:y>100&&(y=100),data.push(y)}for(var res=[],i=0;i<data.length;++i)res.push([i,data[i]]);return[res]}function update(){$scope.realTimeData=getRandomData(),$timeout(update,30)}var t=!1;$interval(function(){var dado=$scope.solo[0];parseInt(dado.valor)>1e3&&0==t&&(t=!0,SweetAlert.swal("Atenção!","Nascente em estado critico, o solo está bastante seco!","warning"))},5e3),$scope.barData=ChartData.load("server/chart/bar.json"),$scope.barOptions={series:{bars:{align:"center",lineWidth:0,show:!0,barWidth:.6,fill:.9}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.barStackeData=ChartData.load("server/chart/barstacked.json"),$scope.barStackedOptions={series:{stack:!0,bars:{align:"center",lineWidth:0,show:!0,barWidth:.6,fill:.9}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,max:200,position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.splineData=ChartData.load("server/chart/spline.json"),$scope.splineOptions={series:{lines:{show:!1},points:{show:!0,radius:4},splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,max:150,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left",tickFormatter:function(v){return v}},shadowSize:0},$scope.areaData=ChartData.load("server/chart/area.json"),$scope.areaOptions={series:{lines:{show:!0,fill:.8},points:{show:!0,radius:4}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,tickColor:"#eee",position:$scope.app.layout.isRTL?"right":"left",tickFormatter:function(v){return v+" visitors"}},shadowSize:0},$scope.lineData=ChartData.load("server/chart/line.json"),$scope.lineOptions={series:{lines:{show:!0,fill:.01},points:{show:!0,radius:4}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(label,x,y){return x+" : "+y}},xaxis:{tickColor:"#eee",mode:"categories"},yaxis:{position:$scope.app.layout.isRTL?"right":"left",tickColor:"#eee"},shadowSize:0},$scope.pieData=ChartData.load("server/chart/pie.json"),$scope.pieOptions={series:{pie:{show:!0,innerRadius:0,label:{show:!0,radius:.8,formatter:function(label,series){return'<div class="flot-pie-label">'+Math.round(series.percent)+"%</div>"},background:{opacity:.8,color:"#222"}}}}},$scope.donutData=ChartData.load("server/chart/donut.json"),$scope.donutOptions={series:{pie:{show:!0,innerRadius:.5}}},$scope.realTimeOptions={series:{lines:{show:!0,fill:!0,fillColor:{colors:["#a0e0f3","#23b7e5"]}},shadowSize:0},grid:{show:!1,borderWidth:0,minBorderMargin:20,labelMargin:10},xaxis:{tickFormatter:function(){return""}},yaxis:{min:0,max:110},legend:{show:!0},colors:["#23b7e5"]};var data=[],totalPoints=300;update(),$scope.$on("panel-refresh",function(event,id){console.log("Simulating chart refresh during 3s on #"+id),$timeout(function(){$scope.$broadcast("removeSpinner",id),console.log("Refreshed #"+id)},3e3)}),$scope.$on("panel-remove",function(event,id,deferred){console.log("Panel #"+id+" removing"),deferred.resolve()}),$scope.$on("panel-removed",function(event,id){console.log("Panel #"+id+" removed")})}]).service("ChartData",["$resource",function($resource){var opts={get:{method:"GET",isArray:!0}};return{load:function(source){return $resource(source,{},opts).get()}}}]),angular.module("sensores").controller("SensoresController",["$scope","$stateParams","$location","Authentication","Sensores",function($scope,$stateParams,$location,Authentication,Sensores){}]),angular.module("sensores").controller("SimuladorController",["$scope","ChartData","$timeout","$interval",function($scope,ChartData,$timeout,$interval){$scope.dados="C:0|U:1020|A:1021|G:0",$scope.send=function(){$.post("/api/stream",{info:$scope.dados})};var stop;$scope.fight=function(){angular.isDefined(stop)||(stop=$interval(function(){try{var c=Math.floor(10*Math.random())+1,u=Math.floor(1020*Math.random())+1,a=Math.floor(1020*Math.random())+1,g=Math.floor(10*Math.random())+1,dados={info:"C:"+c+"|U:"+u+"|A:"+a+"|G:"+g};$.post("/api/stream",dados)}catch(ex){}},5e3))},$scope.stopFight=function(){angular.isDefined(stop)&&($interval.cancel(stop),stop=void 0)},$scope.startRandom=function(){$scope.fight()},$scope.stopRandom=function(){$scope.stopFight()}}]),angular.module("sensores").factory("Sensores",["$resource",function($resource){var Sensores=$resource("api/sensores/:sensorId",{sensorId:"@_id"},{update:{method:"PUT"}});return Sensores}]),function(){function settingsRun($rootScope,$localStorage){$rootScope.app={name:"H2OKay",description:"H2OKay Sensores",year:(new Date).getFullYear(),layout:{isFixed:!0,isCollapsed:!1,isBoxed:!1,isRTL:!1,horizontal:!1,isFloat:!1,asideHover:!1,theme:null},useFullLayout:!1,hiddenFooter:!1,offsidebarOpen:!1,asideToggled:!1,viewAnimation:"ng-fadeInUp"},$rootScope.$watch("app.layout.isCollapsed",function(newValue){newValue===!1&&$rootScope.$broadcast("closeSidebarMenu")})}angular.module("app.settings").run(settingsRun),settingsRun.$inject=["$rootScope","$localStorage"]}(),function(){function SidebarController($rootScope,$scope,$state,SidebarLoader,Utils,Authentication){function activate(){function sidebarReady(items){$scope.menu=items}function isActive(item){if(item){if(item.sref&&"#"!==item.sref)return $state.is(item.sref)||$state.includes(item.sref);var foundActive=!1;return angular.forEach(item.submenu,function(value){isActive(value)&&(foundActive=!0)}),foundActive}}function closeAllBut(index){index+="";for(var i in collapseList)(0>index||index.indexOf(i)<0)&&(collapseList[i]=!0)}function isChild($index){return"string"==typeof $index&&!($index.indexOf("-")<0)}var collapseList=[];$scope.authentication=Authentication,$rootScope.$watch("app.layout.asideHover",function(oldVal,newVal){newVal===!1&&oldVal===!0&&closeAllBut(-1)}),SidebarLoader.getMenu(sidebarReady),$scope.getMenuItemPropClasses=function(item){return(item.heading?"nav-heading":"")+(isActive(item)?" active":"")},$scope.addCollapse=function($index,item){collapseList[$index]=$rootScope.app.layout.asideHover?!0:!isActive(item)},$scope.isCollapse=function($index){return collapseList[$index]},$scope.toggleCollapse=function($index,isParentItem){return Utils.isSidebarCollapsed()||$rootScope.app.layout.asideHover?!0:(angular.isDefined(collapseList[$index])?$scope.lastEventFromChild||(collapseList[$index]=!collapseList[$index],closeAllBut($index)):isParentItem&&closeAllBut(-1),$scope.lastEventFromChild=isChild($index),!0)}}activate()}angular.module("app.sidebar").controller("SidebarController",SidebarController),SidebarController.$inject=["$rootScope","$scope","$state","SidebarLoader","Utils","Authentication"]}(),function(){function UserBlockController($rootScope){function activate(){$rootScope.user={name:"John",job:"ng-developer",picture:"app/img/user/02.jpg"},$rootScope.toggleUserBlock=function(){$rootScope.$broadcast("toggleUserBlock")},$rootScope.userBlockVisible=!0,$rootScope.$on("toggleUserBlock",function(){$rootScope.userBlockVisible=!$rootScope.userBlockVisible})}activate()}angular.module("app.sidebar").controller("UserBlockController",UserBlockController),UserBlockController.$inject=["$rootScope"]}(),function(){function sidebar($rootScope,$timeout,$window,Utils){function link(scope,element,attrs){function watchExternalClicks(newVal){newVal===!0?$timeout(function(){wrapper.on(sbclickEvent,function(e){$(e.target).parents(".aside").length||asideToggleOff()})}):wrapper.off(sbclickEvent)}function asideToggleOff(){$rootScope.app.asideToggled=!1,scope.$$phase||scope.$apply()}var currentState=$rootScope.$state.current.name,$sidebar=element,eventName=Utils.isTouch()?"click":"mouseenter",subNav=$();if($sidebar.on(eventName,".nav > li",function(){(Utils.isSidebarCollapsed()||$rootScope.app.layout.asideHover)&&(subNav.trigger("mouseleave"),subNav=toggleMenuItem($(this),$sidebar),sidebarAddBackdrop())}),scope.$on("closeSidebarMenu",function(){removeFloatingNav()}),$win.on("resize",function(){Utils.isMobile()||asideToggleOff()}),$rootScope.$on("$stateChangeStart",function(event,toState){currentState=toState.name,asideToggleOff(),$rootScope.$broadcast("closeSidebarMenu")}),angular.isDefined(attrs.sidebarAnyclickClose)){var wrapper=$(".wrapper"),sbclickEvent="click.sidebar";$rootScope.$watch("app.asideToggled",watchExternalClicks)}}function sidebarAddBackdrop(){var $backdrop=$("<div/>",{"class":"dropdown-backdrop"});$backdrop.insertAfter(".aside-inner").on("click mouseenter",function(){removeFloatingNav()})}function toggleTouchItem($element){$element.siblings("li").removeClass("open").end().toggleClass("open")}function toggleMenuItem($listItem,$sidebar){removeFloatingNav();var ul=$listItem.children("ul");if(!ul.length)return $();if($listItem.hasClass("open"))return toggleTouchItem($listItem),$();var $aside=$(".aside"),$asideInner=$(".aside-inner"),mar=parseInt($asideInner.css("padding-top"),0)+parseInt($aside.css("padding-top"),0),subNav=ul.clone().appendTo($aside);toggleTouchItem($listItem);var itemTop=$listItem.position().top+mar-$sidebar.scrollTop(),vwHeight=$win.height();return subNav.addClass("nav-floating").css({position:$rootScope.app.layout.isFixed?"fixed":"absolute",top:itemTop,bottom:subNav.outerHeight(!0)+itemTop>vwHeight?0:"auto"}),subNav.on("mouseleave",function(){toggleTouchItem($listItem),subNav.remove()}),subNav}function removeFloatingNav(){$(".dropdown-backdrop").remove(),$(".sidebar-subnav.nav-floating").remove(),$(".sidebar li.open").removeClass("open")}var $win=angular.element($window),directive={link:link,restrict:"EA",template:'<nav class="sidebar" ng-transclude></nav>',transclude:!0,replace:!0};return directive}angular.module("app.sidebar").directive("sidebar",sidebar),sidebar.$inject=["$rootScope","$timeout","$window","Utils"]}(),function(){function SidebarLoader(Menus){function getMenu(onReady,onError){onError=onError||function(){alert("Failure loading menu")};var menu=Menus.getMenu("sidebar");menu?onReady(menu):onError()}this.getMenu=getMenu}angular.module("app.sidebar").service("SidebarLoader",SidebarLoader),SidebarLoader.$inject=["Menus"]}(),function(){function translateConfig($translateProvider){$translateProvider.useStaticFilesLoader({prefix:"/i18n/",suffix:".json"}),$translateProvider.preferredLanguage("en"),$translateProvider.useLocalStorage(),$translateProvider.usePostCompiling(!0)}angular.module("app.translate").config(translateConfig),translateConfig.$inject=["$translateProvider"]}(),function(){function translateRun($rootScope,$translate){$rootScope.language={listIsOpen:!1,available:{en:"English",es_AR:"Español"},init:function(){var proposedLanguage=$translate.proposedLanguage()||$translate.use(),preferredLanguage=$translate.preferredLanguage();$rootScope.language.selected=$rootScope.language.available[proposedLanguage||preferredLanguage]},set:function(localeId){$translate.use(localeId),$rootScope.language.selected=$rootScope.language.available[localeId],$rootScope.language.listIsOpen=!$rootScope.language.listIsOpen}},$rootScope.language.init()}angular.module("app.translate").run(translateRun),translateRun.$inject=["$rootScope","$translate"]}(),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("page.signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("page.signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("page.forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("page.reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("page.reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("page.reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"}).state("app.password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("app.profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("app.accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(response){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]),function(){function animateEnabled($animate){function link(scope,element,attrs){scope.$watch(function(){return scope.$eval(attrs.animateEnabled,scope)},function(newValue){$animate.enabled(!!newValue,element)})}var directive={link:link,restrict:"A"};return directive}angular.module("app.utils").directive("animateEnabled",animateEnabled),animateEnabled.$inject=["$animate"]}(),function(){function resetKey($state,$localStorage){function link(scope,element){element.on("click",function(e){e.preventDefault(),scope.resetKey?(delete $localStorage[scope.resetKey],$state.go($state.current,{},{reload:!0})):$.error("No storage key specified for reset.")})}var directive={link:link,restrict:"A",scope:{resetKey:"@"}};return directive}angular.module("app.utils").directive("resetKey",resetKey),resetKey.$inject=["$state","$localStorage"]}(),function(){function toggleFullscreen(Browser){function link(scope,element){Browser.msie?element.addClass("hide"):element.on("click",function(e){e.preventDefault(),screenfull.enabled?(screenfull.toggle(),screenfull.isFullscreen?$(this).children("em").removeClass("fa-expand").addClass("fa-compress"):$(this).children("em").removeClass("fa-compress").addClass("fa-expand")):$.error("Fullscreen not enabled")})}var directive={link:link,restrict:"A"};return directive}angular.module("app.utils").directive("toggleFullscreen",toggleFullscreen),toggleFullscreen.$inject=["Browser"]}(),function(){function loadCss(){function link(scope,element,attrs){element.on("click",function(e){element.is("a")&&e.preventDefault();var link,uri=attrs.loadCss;uri?(link=createLink(uri),link||$.error("Error creating stylesheet link element.")):$.error("No stylesheet location defined.")})}function createLink(uri){var linkId="autoloaded-stylesheet",oldLink=$("#"+linkId).attr("id",linkId+"-old");return $("head").append($("<link/>").attr({id:linkId,rel:"stylesheet",href:uri})),oldLink.length&&oldLink.remove(),$("#"+linkId)}var directive={link:link,restrict:"A"};return directive}angular.module("app.utils").directive("loadCss",loadCss)}(),function(){function now(dateFilter,$interval){function link(scope,element,attrs){function updateTime(){var dt=dateFilter(new Date,format);element.text(dt)}var format=attrs.format;updateTime();var intervalPromise=$interval(updateTime,1e3);scope.$on("$destroy",function(){$interval.cancel(intervalPromise)})}var directive={link:link,restrict:"EA"};return directive}angular.module("app.utils").directive("now",now),now.$inject=["dateFilter","$interval"]}(),function(){function checkAll(){function link(scope,element){element.on("change",function(){var $this=$(this),index=$this.index()+1,checkbox=$this.find('input[type="checkbox"]'),table=$this.parents("table");table.find("tbody > tr > td:nth-child("+index+') input[type="checkbox"]').prop("checked",checkbox[0].checked)})}var directive={link:link,restrict:"A"};return directive}angular.module("app.utils").directive("checkAll",checkAll)}(),function(){function triggerResize($window,$timeout){function link(scope,element){element.on("click",function(){$timeout(function(){$window.dispatchEvent(new Event("resize"))})})}var directive={link:link,restrict:"A"};return directive}angular.module("app.utils").directive("triggerResize",triggerResize),triggerResize.$inject=["$window","$timeout"]}(),function(){function Browser($window){return $window.jQBrowser}angular.module("app.utils").service("Browser",Browser),Browser.$inject=["$window"]}(),function(){function Utils($window,APP_MEDIAQUERY){var $html=angular.element("html"),$win=angular.element($window),$body=angular.element("body");return{support:{transition:function(){var transitionEnd=function(){var name,element=document.body||document.documentElement,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(name in transEndEventNames)if(void 0!==element.style[name])return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}(),animation:function(){var animationEnd=function(){var name,element=document.body||document.documentElement,animEndEventNames={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(name in animEndEventNames)if(void 0!==element.style[name])return animEndEventNames[name]}();return animationEnd&&{end:animationEnd}}(),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)},touch:"ontouchstart"in window&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0||!1,mutationobserver:window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null},isInView:function(element,options){var $element=$(element);if(!$element.is(":visible"))return!1;var window_left=$win.scrollLeft(),window_top=$win.scrollTop(),offset=$element.offset(),left=offset.left,top=offset.top;return options=$.extend({topoffset:0,leftoffset:0},options),top+$element.height()>=window_top&&top-options.topoffset<=window_top+$win.height()&&left+$element.width()>=window_left&&left-options.leftoffset<=window_left+$win.width()?!0:!1},langdirection:"rtl"===$html.attr("dir")?"right":"left",isTouch:function(){return $html.hasClass("touch")},isSidebarCollapsed:function(){return $body.hasClass("aside-collapsed")},isSidebarToggled:function(){return $body.hasClass("aside-toggled")},isMobile:function(){return $win.width()<APP_MEDIAQUERY.tablet}}}angular.module("app.utils").service("Utils",Utils),Utils.$inject=["$window","APP_MEDIAQUERY"]}();