<h3>Cadastro de Empresa
   <small>editando sua empresa</small>   
</h3>

<div ng-controller="EmpresasEditController" class="container-fluid" ng-init="findOne()">
   <div class="row">
      <div class="col-md-12">
         <form name="formValidate" ng-submit="submitForm()" novalidate="" class="form-validate form-horizontal ng-pristine ng-invalid ng-invalid-required ng-valid-email ng-valid-pattern ng-valid-url ng-invalid-validator ng-valid-minlength ng-valid-maxlength ng-valid-blacklist ng-valid-date ng-valid-date-disabled ng-valid-time">
            <!-- START panel-->
            <div class="panel panel-default">
               <div class="panel-body">
                  <fieldset class="b0">
                     <legend>
                        {{ 'geral.BASIC' | translate:{ appName: app.name } }}
                     </legend>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           {{ 'enterprise.NAME' | translate:{ appName: app.name } }}
                        </label>
                        <div class="col-sm-6">
                           <input type="text" name="name" required ng-model="empresa.name" class="form-control ng-dirty ng-touched ng-invalid ng-invalid-required">                           
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           {{ 'enterprise.CNPJ' | translate:{ appName: app.name } }}
                        </label>
                        <div class="col-sm-6">
                           <input type="text" 
                              ui-br-cnpj-mask
                              required
                              ng-model="empresa.cnpj"
                              class="form-control ng-dirty ng-touched ng-invalid">
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Endereço
                        </label>
                        <div class="col-sm-6">
                           <div class="input-group">
                              <ui-select 
                                 ng-model="empresa.endereco" 
                                 name="endereco" 
                                 ng-required="true" 
                                 ng-disabled="disabled" 
                                 reset-search-input="false"
                                 class="ng-dirty ng-touched ng-invalid">
                                 <ui-select-match placeholder="Digite o endereço...">
                                    {{$select.selected.formatted_address}}
                                 </ui-select-match>
                                 <ui-select-choices 
                                    repeat="address in addresses track by $index" 
                                    refresh="refreshAddresses($select.search)" 
                                    refresh-delay="0">
                                    <div ng-bind-html="address.formatted_address | highlight: $select.search"></div>
                                 </ui-select-choices>
                              </ui-select>
                              <span class="input-group-btn">
                                 <button type="button" ng-click="empresa.endereco = undefined" class="btn btn-default">
                                    <small>
                                       <em class="fa fa-times text-muted"></em>
                                    </small>
                                 </button>
                              </span>
                           </div>
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Telefone
                        </label>
                        <div class="col-sm-6">
                           <input type="text" 
                              ui-br-phone-number
                              required
                              ng-model="empresa.telefone"
                              class="form-control ng-dirty ng-touched">
                        </div>
                     </div>
                  </fieldset>

                  <fieldset ng-show="empresa.updated">
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Última atualização
                        </label>
                        <div class="col-sm-6">
                           <p class="input-group">
                              <input type="text" disabled name="date" datepicker-popup="dd/MM/yyyy HH:mm" ng-model="empresa.updated" is-open="opened" datepicker-options="dateOptions" close-text="Fechar"
                              class="form-control ng-dirty ng-touched ng-invalid" />
                              <span class="input-group-btn">
                                 <button type="button" disabled ng-click="open($event)" class="btn btn-default">
                                    <em class="fa fa-calendar"></em>
                                 </button>
                              </span>
                           </p>
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">Ativo</label>
                        <div class="col-sm-6">
                           <div class="checkbox c-checkbox needsclick">
                              <label class="needsclick">
                                 <input type="checkbox" 
                                    requiread="" 
                                    name="checkbox" 
                                    ng-model="empresa.ativo" 
                                    class="needsclick ng-dirty ng-valid-parse ng-touched ng-valid ng-valid-required">
                                 <span class="fa fa-check"></span></label>
                           </div>
                        </div>
                        <div class="col-sm-4"></div>
                     </div>
                  </fieldset>

               </div>               

                <div class="panel-footer text-center">                  
                  <div class="text-right mt-lg">
                     <button type="button" class="btn btn-warning">
                        {{ 'button.DISCARD' | translate:{ appName: app.name } }}
                     </button>
                     <button type="submit" class="btn btn-success">
                        {{ 'button.SAVE' | translate:{ appName: app.name } }}
                     </button>
                  </div>
                </div>
            <!-- END panel-->
         </form>

      </div>
   </div>
   <!-- END row-->
</div>
