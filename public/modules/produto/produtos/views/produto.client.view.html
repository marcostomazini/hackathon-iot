<h3>Produtos
   <small ng-if="!edit">cadastre seu produto</small>
   <small ng-if="edit">edite seu produto</small>
</h3>

<div ng-controller="ProdutoController" class="container-fluid">
   <div class="row">
      <div class="col-md-12">
         <form name="formValidate" ng-submit="submitForm()" novalidate="" class="form-validate form-horizontal ng-pristine ng-invalid ng-invalid-required ng-valid-email ng-valid-pattern ng-valid-url ng-invalid-validator ng-valid-minlength ng-valid-maxlength ng-valid-blacklist ng-valid-date ng-valid-date-disabled ng-valid-time">
            <!-- START panel-->
            <div class="panel panel-default">
               <div class="panel-body">
                  <fieldset class="b0">
                     <legend>
                        {{ 'geral.BASIC' | translate:{ appName: app.name } }}
                     </legend>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Código
                        </label>
                        <div class="col-sm-6">
                           <input type="text" name="name" required ng-model="produto.codigo" class="form-control ng-dirty ng-touched ng-invalid ng-invalid-required">                           
                        </div>
                     </div>
                  </fieldset> 

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Código de Barra
                        </label>
                        <div class="col-sm-6">
                           <input type="text" name="codigoBarra" ng-model="produto.codigoBarra" class="form-control ng-dirty ng-touched ng-invalid ng-invalid-required">                           
                        </div>
                     </div>
                  </fieldset> 

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Descrição
                        </label>
                        <div class="col-sm-6">
                           <input type="text" name="descricao" required ng-model="produto.descricao" class="form-control ng-dirty ng-touched ng-invalid ng-invalid-required">                           
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Detalhes
                        </label>
                        <div class="col-sm-6">
                           <input type="text" name="detalhes" ng-model="produto.detalhes" class="form-control ng-dirty ng-touched ng-invalid ng-invalid-required">                           
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Tipo do Produto
                        </label>
                        <div class="col-sm-6">
                           <select name="select" 
                              required ng-model="produto.tipoProduto" 
                              class="form-control ng-dirty ng-valid-parse ng-valid ng-valid-required ng-touched">
                              <option value=""></option>
                              <option value="composicao">Composição</option>
                              <option value="complemento">Complemento</option>
                              <option value="produto">Produto</option>                              
                           </select>
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Categoria
                        </label>
                        <div class="col-sm-6">
                           <div class="input-group">
                              <ui-select 
                                 ng-model="produto.categoria" 
                                 ng-required="true" 
                                 ng-disabled="disabled" 
                                 reset-search-input="false"
                                 class="ng-dirty ng-touched ng-invalid">
                                 <ui-select-match placeholder="Digite a Categoria...">
                                    {{$select.selected.nome}}
                                 </ui-select-match>
                                 <ui-select-choices 
                                    repeat="item._id as item in categorias track by $index" 
                                    refresh="categoria($select.search)" 
                                    refresh-delay="0">
                                    <div ng-bind-html="item.nome | highlight: $select.search"></div>
                                 </ui-select-choices>
                              </ui-select>
                              <span class="input-group-btn">
                                 <button type="button" ng-click="produto.categoria = undefined" class="btn btn-default">
                                    <small>
                                       <em class="fa fa-times text-muted"></em>
                                    </small>
                                 </button>
                              </span>
                           </div>
                        </div>
                     </div>
                  </fieldset> 

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Unidade
                        </label>
                        <div class="col-sm-6">
                           <div class="input-group">
                              <ui-select 
                                 ng-model="produto.unidade" 
                                 ng-required="true" 
                                 ng-disabled="disabled" 
                                 reset-search-input="false"
                                 class="ng-dirty ng-touched ng-invalid">
                                 <ui-select-match placeholder="Digite a Unidade...">
                                    {{$select.selected.nome}}
                                 </ui-select-match>
                                 <ui-select-choices 
                                    repeat="item._id as item in unidades track by $index" 
                                    refresh="unidade($select.search)" 
                                    refresh-delay="0">
                                    <div ng-bind-html="item.nome | highlight: $select.search"></div>
                                 </ui-select-choices>
                              </ui-select>
                              <span class="input-group-btn">
                                 <button type="button" ng-click="produto.unidade = undefined" class="btn btn-default">
                                    <small>
                                       <em class="fa fa-times text-muted"></em>
                                    </small>
                                 </button>
                              </span>
                           </div>
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Setor
                        </label>
                        <div class="col-sm-6">
                           <div class="input-group">
                              <ui-select 
                                 ng-model="produto.setor" 
                                 ng-required="true" 
                                 ng-disabled="disabled" 
                                 reset-search-input="false"
                                 class="ng-dirty ng-touched ng-invalid">
                                 <ui-select-match placeholder="Digite o Setor...">
                                    {{$select.selected.nome}}
                                 </ui-select-match>
                                 <ui-select-choices 
                                    repeat="item._id as item in setores track by $index" 
                                    refresh="setor($select.search)" 
                                    refresh-delay="0">
                                    <div ng-bind-html="item.nome | highlight: $select.search"></div>
                                 </ui-select-choices>
                              </ui-select>
                              <span class="input-group-btn">
                                 <button type="button" ng-click="produto.setor = undefined" class="btn btn-default">
                                    <small>
                                       <em class="fa fa-times text-muted"></em>
                                    </small>
                                 </button>
                              </span>
                           </div>
                        </div>
                     </div>
                  </fieldset>

                   <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">
                           Preço
                        </label>
                        <div class="col-sm-6">                        
                           <div class="input-group">
                              <span class="input-group-addon">R$</span>
                              <input type="text" 
                                 ui-number-mask="decimals"
                                 required
                                 ng-model="produto.preco"
                                 class="form-control ng-dirty ng-touched ng-invalid ng-invalid-required">
                           </div>                           
                        </div>
                     </div>
                  </fieldset>

                  <fieldset>
                     <div class="form-group">
                        <label class="col-sm-2 control-label">Divisível</label>
                        <div class="col-sm-6">
                           <div class="checkbox c-checkbox needsclick">
                              <label class="needsclick">
                                 <input type="checkbox" 
                                    requiread="" 
                                    name="checkbox" 
                                    ng-model="produto.divisivel" 
                                    class="needsclick ng-dirty ng-valid-parse ng-touched ng-valid ng-valid-required">
                                 <span class="fa fa-check"></span></label>
                           </div>
                        </div>
                        <div class="col-sm-4"></div>
                     </div>
                  </fieldset>                  

                  <fieldset ng-if="produto.tipoProduto == 'produto'">
                     <div class="form-group">
                        <label class="col-sm-2 control-label">Produto Complemento</label>
                        <div class="col-sm-6">
                           <select chosen multiple
                              data-placeholder="Escolha os complementos"
                              options="complementos"
                              ng-model="produto.complemento"
                              ng-options="item._id as item.descricao for item in complementos"
                              class="chosen-select form-control ng-untouched localytics-chosen ng-dirty ng-valid-parse ng-valid ng-valid-required">
                           </select>
                        </div>
                        <div class="col-sm-4"></div>
                     </div>
                  </fieldset>

               </div>               

               <div class="panel-footer text-center">                  
                  <div class="text-right mt-lg">
                     <button type="button" class="btn btn-warning">
                        {{ 'button.DISCARD' | translate:{ appName: app.name } }}
                     </button>
                     <button type="submit" class="btn btn-success">
                        {{ 'button.SAVE' | translate:{ appName: app.name } }}
                     </button>
                  </div>
               </div>
            </div>
            <!-- END panel-->
         </form>

      </div>
   </div>
   <!-- END row-->
</div>
